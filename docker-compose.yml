version: '3'
services:
  mysql:
    image: mysql:8.0
    container_name: crony-mysql
    ports:
      - "3306:3306"
    environment:
      MYSQL_ROOT_PASSWORD: root  # 根密码
      MYSQL_DATABASE: cronix      # 自动创建数据库
      MYSQL_USER: xing_cronix     
      MYSQL_PASSWORD: xing_pwd 
    # volumes:
    #   - mysql-data:/var/lib/mysql
    restart: always
    networks:
      - crony-network

  # etcd服务
  etcd:
    image: bitnami/etcd:3.5
    container_name: crony-etcd
    ports:
      - "2379:2379"  # 客户端端口
      - "2380:2380"  # 集群端口
    environment:
      - ALLOW_NONE_AUTHENTICATION=yes  # 开发环境关闭认证
      - ETCD_ADVERTISE_CLIENT_URLS=http://etcd:2379
    # volumes:
    #   - etcd-data:/bitnami/etcd
    restart: always
    networks:
      - crony-network

networks:
  crony-network:
    driver: bridge

# volumes:
#   mysql-data:
#   etcd-data: